<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ReserveGrid OS — SV2 Mining Gateway</title>
  <meta name="description" content="Miner-facing Stratum V2 gateway with Noise NX, template verification, prevhash fail-closed switching, and two-event share lifecycle. 34 reason codes, 51 config keys, 3 deployment modes.">
  <meta name="theme-color" content="#080e1a">

  <link rel="canonical" href="https://veldra.org/product/">
  <link rel="icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/brand/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/brand/favicon-16.png">
  <link rel="apple-touch-icon" href="/assets/brand/apple-touch-icon.png">

  <meta property="og:title" content="ReserveGrid OS — SV2 Mining Gateway">
  <meta property="og:description" content="Miner-facing Stratum V2 gateway with Noise NX, template verification, prevhash fail-closed switching, and two-event share lifecycle. 34 reason codes, 51 config keys, 3 deployment modes.">
  <meta property="og:url" content="https://veldra.org/product/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://veldra.org/assets/brand/veldra-mark.png">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="stylesheet" href="/assets/style.css?v=8">
  <script src="/assets/script.js?v=8" defer></script>
</head>
<body>

  <nav class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="/" aria-label="Veldra home">
          <img src="/assets/brand/veldra-logo.png" alt="Veldra">
        </a>
        <div class="navlinks">
          <a href="/">Home</a>
          <a href="/product/" aria-current="page">Product</a>
          <a href="/docs/">Docs</a>
          <a href="/about/">About</a>
        </div>
        <div class="nav-actions">
          <a href="/observe/" class="btn btn-primary btn-sm">Observe</a>
        </div>
        <button class="nav-toggle" aria-label="Menu" aria-expanded="false">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- ── Hero (Light variant) ─────────────────── -->
  <section class="hero-light">
    <div class="container">
      <div class="hero-inner fade-up">
        <div class="hero-label">
          <span class="hero-label-dot"></span>
          <span>ReserveGrid OS</span>
        </div>
        <h1 class="hero-title">
          Miner-facing standard job server for Stratum V2
        </h1>
        <p class="hero-sub">
          Built in Rust with policy evaluation, share lifecycle tracking, and end-to-end observability.
          Every rejection carries a machine-readable reason code. Every share follows a two-event pipeline.
          Choose your deployment mode and scale with confidence.
        </p>
        <div class="hero-actions">
          <a href="/docs/" class="btn btn-primary">Read the Docs</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Feature Cards (6 expandable) ───────── -->
  <section class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-eyebrow">Core capabilities</div>
        <h2>Built for production SV2 deployment</h2>
      </div>
      <div class="feature-grid fade-up">
        <div class="feature-card">
          <div class="feature-header">
            <div class="feature-icon card-icon-blue">&#x2713;</div>
            <h3>Explainable rejects</h3>
          </div>
          <p>34 GatewayReason codes. Every rejection includes reason_code + policy_context for full observability.</p>
          <button class="feature-toggle" aria-expanded="false">Show categories</button>
          <div class="feature-content" hidden>
            <dl class="feature-detail-list">
              <dt>Transport errors</dt>
              <dd>Channel setup, frame parsing, protocol violations</dd>
              <dt>Framing errors</dt>
              <dd>Message size, frame sequence, encoding issues</dd>
              <dt>Auth errors</dt>
              <dd>Invalid credentials, worker ID format, allowlist mismatch</dd>
              <dt>Channel errors</dt>
              <dd>Unknown channel_id, channel not open, subscriber role violation</dd>
              <dt>Job errors</dt>
              <dd>Invalid job_id, unknown job, stale prevhash</dd>
              <dt>Share errors</dt>
              <dd>Difficulty below target, ntime out of range, duplicate nonce</dd>
            </dl>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-header">
            <div class="feature-icon card-icon-green">&#x25C6;</div>
            <h3>Two-event share lifecycle</h3>
          </div>
          <p>share_accepted at ACK time, share_forward_result after upstream POST. Deterministic joins via share_id.</p>
          <button class="feature-toggle" aria-expanded="false">Show fields</button>
          <div class="feature-content" hidden>
            <dl class="feature-detail-list">
              <dt>Event 1: share_accepted</dt>
              <dd>share_id, event_id, timestamp, miner_id, job_id, reason_code, sv2_response</dd>
              <dt>Event 2: share_forward_result</dt>
              <dd>share_id, event_id, timestamp, forwarded, upstream_accepted, upstream_http_status, error_detail</dd>
              <dt>Join key</dt>
              <dd>Both events carry the same share_id for 1:1 correlation</dd>
            </dl>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-header">
            <div class="feature-icon card-icon-navy">&#x25A6;</div>
            <h3>Three deployment modes</h3>
          </div>
          <p>shadow/observe/inline. Start with audit, graduate to enforcement without code changes.</p>
          <button class="feature-toggle" aria-expanded="false">Show comparison</button>
          <div class="feature-content" hidden>
            <dl class="feature-detail-list">
              <dt>Shadow</dt>
              <dd>Templates verified internally, results logged, no miner impact (audit only)</dd>
              <dt>Observe</dt>
              <dd>Miners connected, all templates pass, rejections logged but not enforced, full observability</dd>
              <dt>Inline</dt>
              <dd>Full enforcement, no unverified job reaches a miner, prevhash switching is fail-closed</dd>
            </dl>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-header">
            <div class="feature-icon card-icon-blue">&#x25C8;</div>
            <h3>Prevhash fail-closed</h3>
          </div>
          <p>50ms verdict timeout, 5s stale hold, deterministic disconnect on timeout. Happy path and timeout path hardened.</p>
          <button class="feature-toggle" aria-expanded="false">Show details</button>
          <div class="feature-content" hidden>
            <dl class="feature-detail-list">
              <dt>Happy path</dt>
              <dd>Verdict arrives within 50ms. New prevhash + job broadcast immediately. Target: p50&lt;50ms, p95&lt;150ms, p99&lt;300ms.</dd>
              <dt>Timeout path</dt>
              <dd>No verdict within 50ms. Miners hold stale job for up to 5s. After 5s without verdict, deterministic disconnect with prevhash_switch_timeout code.</dd>
              <dt>Risk model</dt>
              <dd>Zero stale work distributed. Gateway blocks on miner demand rather than dropping shares.</dd>
            </dl>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-header">
            <div class="feature-icon card-icon-green">&#x2699;</div>
            <h3>51-key config surface</h3>
          </div>
          <p>TOML + environment variable overrides. 6 config sections for fine-grained control.</p>
          <button class="feature-toggle" aria-expanded="false">Show sections</button>
          <div class="feature-content" hidden>
            <dl class="feature-detail-list">
              <dt>Core</dt>
              <dd>mode, listen_addr, verifier_addr, upstream_url, upstream_failure_policy, http_api_key</dd>
              <dt>Noise</dt>
              <dd>privkey, pubkey, authorized_keys, handshake_timeout_ms</dd>
              <dt>Timing</dt>
              <dd>prevhash_verdict_timeout_ms, prevhash_stale_hold_ms, upstream_poll_interval_ms, job_broadcast_interval_ms</dd>
              <dt>Ntime</dt>
              <dd>ntime_leniency_seconds, ntime_max_age_blocks</dd>
              <dt>Share</dt>
              <dd>share_upstream_url, share_upstream_secret, share_forward_queue_size, share_forward_max_in_flight, share_batch_interval_ms</dd>
              <dt>Auth</dt>
              <dd>mode (allowlist/prefix_map/open), allowlist, prefix_map, max_worker_id_bytes, max_workers_per_channel</dd>
            </dl>
          </div>
        </div>

        <div class="feature-card">
          <div class="feature-header">
            <div class="feature-icon card-icon-navy">&#x25A3;</div>
            <h3>Live observability</h3>
          </div>
          <p>Prometheus metrics (30+ gauges/counters/histograms), event stream NDJSON, Grafana dashboards included.</p>
          <button class="feature-toggle" aria-expanded="false">Show metrics</button>
          <div class="feature-content" hidden>
            <dl class="feature-detail-list">
              <dt>Prometheus endpoint</dt>
              <dd>/metrics on HTTP API. 30+ metrics covering connections, jobs, shares, verdicts, prevhash latencies.</dd>
              <dt>Event stream</dt>
              <dd>/gateway/events NDJSON endpoint. Real-time share_accepted, share_forward_result, template_verdict events. Supports filtering by type and time.</dd>
              <dt>CSV export</dt>
              <dd>Share history export via HTTP API. Bulk analysis, compliance audits, performance reporting.</dd>
              <dt>Grafana dashboards</dt>
              <dd>Pre-built dashboards for miner connections, job distribution, prevhash switching health, upstream responsiveness.</dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Mode Comparison ──────────────────────── -->
  <section class="section section-alt">
    <div class="container">
      <div class="section-header">
        <div class="section-eyebrow">Deployment modes</div>
        <h2>Detailed comparison</h2>
      </div>
      <div class="grid-3 fade-up">
        <div class="mode-card mode-shadow">
          <h3>Shadow</h3>
          <p>Audit template policy without affecting live mining. No miners, no risk, maximum observability.</p>
          <dl class="mode-card-detail">
            <dt>Gates templates</dt>
            <dd>No</dd>
            <dt>Prevhash fail-closed</dt>
            <dd>N/A</dd>
            <dt>Share forwarding</dt>
            <dd>No</dd>
            <dt>Config required</dt>
            <dd>verifier_addr, policy context</dd>
            <dt>Miners connected</dt>
            <dd>None</dd>
            <dt>Verification</dt>
            <dd>Active (log only)</dd>
            <dt>Risk</dt>
            <dd>Zero (no miner impact)</dd>
          </dl>
        </div>
        <div class="mode-card mode-observe">
          <h3>Observe</h3>
          <p>Miners receive all jobs. Rejection verdicts logged but never gated. Build confidence before inline.</p>
          <dl class="mode-card-detail">
            <dt>Gates templates</dt>
            <dd>No</dd>
            <dt>Prevhash fail-closed</dt>
            <dd>N/A</dd>
            <dt>Share forwarding</dt>
            <dd>Yes</dd>
            <dt>Config required</dt>
            <dd>listen_addr, upstream_url, share_upstream_url, verifier_addr</dd>
            <dt>Miners connected</dt>
            <dd>Yes</dd>
            <dt>Verification</dt>
            <dd>Active (log, never gate)</dd>
            <dt>Risk</dt>
            <dd>Low (unverified templates may reach miners)</dd>
          </dl>
        </div>
        <div class="mode-card mode-inline">
          <h3>Inline</h3>
          <p>Full enforcement. No invalid template reaches a miner. Prevhash switching is deterministic and fail-closed.</p>
          <dl class="mode-card-detail">
            <dt>Gates templates</dt>
            <dd>Yes</dd>
            <dt>Prevhash fail-closed</dt>
            <dd>Yes (50ms timeout + 5s hold)</dd>
            <dt>Share forwarding</dt>
            <dd>Yes</dd>
            <dt>Config required</dt>
            <dd>All keys, especially timing, gates, and disconnect policy</dd>
            <dt>Miners connected</dt>
            <dd>Yes</dd>
            <dt>Verification</dt>
            <dd>Active (gating enforced)</dd>
            <dt>Risk</dt>
            <dd>Production (fail-closed protects integrity)</dd>
          </dl>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Config Reference Preview ───────────── -->
  <section class="section">
    <div class="container">
      <div class="section-header">
        <div class="section-eyebrow">Configuration</div>
        <h2>Quick reference</h2>
        <p>All configuration via TOML with optional environment variable overrides (format: RESERVEGRID_SECTION_KEY).</p>
      </div>
      <div class="tab-group fade-up">
        <div class="tab-buttons">
          <button class="tab-btn active" data-tab="config-core">Core</button>
          <button class="tab-btn" data-tab="config-timing">Timing</button>
          <button class="tab-btn" data-tab="config-share">Share</button>
          <button class="tab-btn" data-tab="config-auth">Auth</button>
        </div>

        <div id="config-core" class="tab-panel active">
          <div class="code-panel" data-lang="toml">
            <button class="copy-btn">Copy</button>
<pre>[gateway]
mode = "inline"                          # shadow, observe, or inline
listen_addr = "0.0.0.0:3333"             # Miner connection address
verifier_addr = "127.0.0.1:5001"         # pool-verifier TCP address
upstream_url = "http://bitcoind:8332"    # Block template source
upstream_failure_policy = "fail_closed"  # fail_closed or permit_all
http_api_key = "your-secret-here"        # Authentication for metrics/events</pre>
          </div>
        </div>

        <div id="config-timing" class="tab-panel">
          <div class="code-panel" data-lang="toml">
            <button class="copy-btn">Copy</button>
<pre>[timing]
# Prevhash switching
prevhash_verdict_timeout_ms = 50         # Wait time for verdict before timeout
prevhash_stale_hold_ms = 5000            # Hold stale job after timeout

# Polling and broadcast
upstream_poll_interval_ms = 1000         # Check for new templates every 1s
job_broadcast_interval_ms = 100          # Aggregate job broadcasts

# Message timeouts
channel_idle_timeout_ms = 3600000        # Close idle channels after 1 hour
nonce_expire_secs = 60                   # Expire old nonces from dedup filter</pre>
          </div>
        </div>

        <div id="config-share" class="tab-panel">
          <div class="code-panel" data-lang="toml">
            <button class="copy-btn">Copy</button>
<pre>[share]
share_upstream_url = "http://pool-backend:9090/shares"
share_upstream_secret = "hmac-key-here"  # HMAC-SHA256 signing key
share_forward_queue_size = 10000         # Max pending shares in queue
share_forward_max_in_flight = 100        # Max concurrent upstream requests
share_batch_interval_ms = 100            # Batch shares before sending
share_forward_timeout_ms = 5000          # Upstream request timeout</pre>
          </div>
        </div>

        <div id="config-auth" class="tab-panel">
          <div class="code-panel" data-lang="toml">
            <button class="copy-btn">Copy</button>
<pre>[auth]
mode = "prefix_map"                      # allowlist, prefix_map, or open

# Allowlist mode: explicit list of authorized credentials
allowlist = [
  { username = "miner1", password = "secret1" },
  { username = "miner2", password = "secret2" }
]

# Prefix map mode: pattern-based authorization
prefix_map = [
  { prefix = "farm1_", secret = "farm1-key" },
  { prefix = "farm2_", secret = "farm2-key" }
]

max_worker_id_bytes = 512                # Limit worker_name field length
max_workers_per_channel = 1000           # Limit concurrent workers per channel</pre>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Security Boundaries ──────────────────── -->
  <section class="section section-alt">
    <div class="container">
      <div class="section-header">
        <div class="section-eyebrow">Scope</div>
        <h2>What ReserveGrid OS is and isn't</h2>
      </div>
      <div class="grid-3 fade-up">
        <div class="card">
          <div class="card-icon card-icon-green">&#x2713;</div>
          <h3>What it is</h3>
          <p><strong>Policy evaluation engine:</strong> Validates templates against operator rules before distribution.</p>
          <p><strong>Share lifecycle tracker:</strong> Records two deterministic events for every share with full context.</p>
          <p><strong>Observable gateway:</strong> Exposes metrics, event stream, and config surface for production monitoring.</p>
        </div>
        <div class="card">
          <div class="card-icon card-icon-navy">&#x26A0;</div>
          <h3>What it is not</h3>
          <p><strong>Not a pool:</strong> Does not track payouts or maintain miner accounts. Upstream HTTP API handles accounting.</p>
          <p><strong>Not a custodian:</strong> Does not hold or sign blocks. Only verifies before forwarding to upstream.</p>
          <p><strong>Not a payout calculator:</strong> Share credits are determined by upstream pool backend.</p>
        </div>
        <div class="card">
          <div class="card-icon card-icon-blue">&#x2699;</div>
          <h3>Operational guidance</h3>
          <p><strong>Network isolation:</strong> Run on private network or VPN. Use http_api_key for HTTP API authentication.</p>
          <p><strong>TLS for non-loopback:</strong> Enable TLS if verifier or upstream are remote. Noise NX already encrypts miner traffic.</p>
          <p><strong>Monitoring:</strong> Expose Prometheus metrics only to internal dashboards. Use event stream for audit logging.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Demo Section ──────────────────────── -->
  <section class="section" id="demo">
    <div class="container">
      <div class="section-header">
        <div class="section-eyebrow">Demo</div>
        <h2>See it in action</h2>
      </div>
      <div class="video-wrap fade-up">
        <iframe
          width="100%"
          height="600"
          src="https://www.youtube.com/embed/lDIIl7Oe73Y"
          title="ReserveGrid OS Demo"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>
      </div>
      <div class="callout callout-blue mt-6 fade-up" style="text-align:center;">
        <strong>Not ready for inline?</strong> Try observe mode first. It requires the same configuration but logs all verdicts without gating. No production impact, full visibility.
      </div>
    </div>
  </section>

  <!-- ── CTA ─────────────────────────────────── -->
  <section class="section">
    <div class="container">
      <div class="card card-glow fade-up" style="padding:48px;text-align:center;">
        <div class="section-eyebrow" style="color:rgba(255,255,255,.4);">Get started</div>
        <h2 style="color:#fff;margin:12px 0 8px;font-size:28px;">Ready to deploy SV2 with confidence?</h2>
        <p style="color:rgba(255,255,255,.55);max-width:540px;margin:0 auto 24px;">
          Shadow mode costs nothing. Observe mode builds trust. Inline mode protects revenue.
        </p>
        <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
          <a href="/docs/" class="btn btn-primary">Read the docs</a>
          <a href="/observe/" class="btn btn-outline">Try observe mode</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ── Footer ──────────────────────────────── -->
  <footer class="footer">
    <div class="container">
      <div class="footer-inner">
        <div class="footer-brand">
          <img src="/assets/brand/veldra-logo.png" alt="Veldra" style="height:28px;filter:brightness(0) invert(1);opacity:.7;">
          <p>SV2 mining gateway infrastructure for production pool operators.</p>
        </div>
        <div>
          <h4>Product</h4>
          <div class="footer-links">
            <a href="/product/">ReserveGrid OS</a>
            <a href="/product/#demo">Demo</a>
            <a href="/observe/">Observe Mode</a>
          </div>
        </div>
        <div>
          <h4>Resources</h4>
          <div class="footer-links">
            <a href="/docs/">Documentation</a>
            <a href="/docs/#reason-codes">Reason Codes</a>
            <a href="/docs/#config">Configuration</a>
          </div>
        </div>
        <div>
          <h4>Company</h4>
          <div class="footer-links">
            <a href="/about/">About</a>
            <a href="mailto:jarrondeng@veldra.org">Contact</a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <span>&copy; 2026 Veldra, Inc.</span>
        <div class="footer-legal">
          <a href="/privacy/">Privacy</a>
          <a href="/terms/">Terms</a>
          <a href="/disclaimer/">Disclaimer</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Feature card expansion toggle
    document.querySelectorAll('.feature-toggle').forEach(button => {
      button.addEventListener('click', function() {
        const content = this.nextElementSibling;
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
        content.hidden = isExpanded;
      });
    });

    // Tab group functionality
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const tabName = this.getAttribute('data-tab');
        const tabGroup = this.closest('.tab-group');

        // Hide all panels
        tabGroup.querySelectorAll('.tab-panel').forEach(panel => {
          panel.classList.remove('active');
        });

        // Remove active from all buttons
        tabGroup.querySelectorAll('.tab-btn').forEach(b => {
          b.classList.remove('active');
        });

        // Show selected panel and mark button as active
        document.getElementById(tabName).classList.add('active');
        this.classList.add('active');
      });
    });

    // Copy button functionality
    document.querySelectorAll('.copy-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const code = this.nextElementSibling.textContent;
        navigator.clipboard.writeText(code).then(() => {
          const original = this.textContent;
          this.textContent = 'Copied!';
          setTimeout(() => {
            this.textContent = original;
          }, 2000);
        });
      });
    });
  </script>

</body>
</html>
